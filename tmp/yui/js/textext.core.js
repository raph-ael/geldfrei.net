(function(e,i){function j(){}function B(){}function m(){}var u=(JSON||{}).stringify,r=Array.prototype.slice,o,C="undefined",b="item.manager",d="plugins",y="ext",x="html.wrap",s="html.hidden",A="keys",t="preInvalidate",v="postInvalidate",l="getFormData",n="setFormData",w="setInputData",q="postInit",c="ready",a={itemManager:B,plugins:[],ext:{},html:{wrap:'<div class="text-core"><div class="text-wrap"/></div>',hidden:'<input type="hidden" />'},keys:{8:"backspace",9:"tab",13:"enter!",27:"escape!",37:"left",38:"up!",39:"right",40:"down!",46:"delete",108:"numpadEnter"}};if(!u){throw new Error("JSON.stringify() not found")}function h(F,E){if(typeof(E)==="string"){E=E.split(".")}var G=E.join(".").replace(/\.(\w)/g,function(H,I){return I.toUpperCase()}),D=E.shift(),p;if(typeof(p=F[G])!=C){p=p}else{if(typeof(p=F[D])!=C&&E.length>0){p=h(p,E)}}return p}function g(){var D=r.apply(arguments),p=this,F=D.length===1?p:D.shift(),E;D=D[0]||{};function G(I,H){F.bind(I,function(){return H.apply(p,arguments)})}for(E in D){G(E,D[E])}}function z(p,D){return{input:p,form:D}}o=B.prototype;o.init=function(p){};o.filter=function(G,F){var p=[],D,E;for(D=0;D<G.length;D++){E=G[D];if(this.itemContains(E,F)){p.push(E)}}return p};o.itemContains=function(p,D){return this.itemToString(p).toLowerCase().indexOf(D.toLowerCase())==0};o.stringToItem=function(p){return p};o.itemToString=function(p){return p};o.compareItems=function(D,p){return D==p};o=j.prototype;o.init=function(E,H){var D=this,F,G,p;D._defaults=e.extend({},a);D._opts=H||{};D._plugins={};D._itemManager=G=new (D.opts(b))();E=e(E);p=e(D.opts(x));F=e(D.opts(s));E.wrap(p).keydown(function(I){return D.onKeyDown(I)}).keyup(function(I){return D.onKeyUp(I)}).data("textext",D);e(D).data({hiddenInput:F,wrapElement:E.parents(".text-wrap").first(),input:E});F.attr("name",E.attr("name"));E.attr("name",null);F.insertAfter(E);e.extend(true,G,D.opts(y+".item.manager"));e.extend(true,D,D.opts(y+".*"),D.opts(y+".core"));D.originalWidth=E.outerWidth();D.invalidateBounds();G.init(D);D.initPatches();D.initPlugins(D.opts(d),e.fn.textext.plugins);D.on({setFormData:D.onSetFormData,getFormData:D.onGetFormData,setInputData:D.onSetInputData,anyKeyUp:D.onAnyKeyUp});D.trigger(q);D.trigger(c);D.getFormData(0)};o.initPatches=function(){var E=[],D=e.fn.textext.patches,p;for(p in D){E.push(p)}this.initPlugins(E,D)};o.initPlugins=function(D,J){var E=this,H,F,I,p=[],G;if(typeof(D)=="string"){D=D.split(/\s*,\s*|\s+/g)}for(G=0;G<D.length;G++){F=D[G];I=J[F];if(I){E._plugins[F]=I=new I();E[F]=(function(K){return function(){return K}})(I);p.push(I);e.extend(true,I,E.opts(y+".*"),E.opts(y+"."+F))}}p.sort(function(L,K){L=L.initPriority();K=K.initPriority();return L===K?0:L<K?1:-1});for(G=0;G<p.length;G++){p[G].init(E)}};o.hasPlugin=function(p){return !!this._plugins[p]};o.on=g;o.bind=function(D,p){this.input().bind(D,p)};o.trigger=function(){var p=arguments;this.input().trigger(p[0],r.call(p,1))};o.itemManager=function(){return this._itemManager};o.input=function(){return e(this).data("input")};o.opts=function(D){var p=h(this._opts,D);return typeof(p)=="undefined"?h(this._defaults,D):p};o.wrapElement=function(){return e(this).data("wrapElement")};o.invalidateBounds=function(){var F=this,E=F.input(),H=F.wrapElement(),D=H.parent(),G=F.originalWidth+"px",p;F.trigger(t);p=E.outerHeight()+"px";E.css({width:G});H.css({width:G,height:p});D.css({height:p});F.trigger(v)};o.focusInput=function(){this.input()[0].focus()};o.serializeData=u;o.hiddenInput=function(p){return e(this).data("hiddenInput")};o.getWeightedEventResponse=function(F,E){var D=this,H={},p=0;D.trigger(F,H,E);for(var G in H){p=Math.max(p,G)}return H[p]};o.getFormData=function(E){var p=this,D=p.getWeightedEventResponse(l,E||0);p.trigger(n,D.form);p.trigger(w,D.input)};o.onAnyKeyUp=function(D,p){this.getFormData(p)};o.onSetInputData=function(D,p){this.input().val(p)};o.onSetFormData=function(E,D){var p=this;p.hiddenInput().val(p.serializeData(D))};o.onGetFormData=function(D,p){var E=this.input().val();p[0]=z(E,E)};e(["Down","Up"]).each(function(){var p=this.toString();o["onKey"+p]=function(G){var D=this,E=D.opts(A)[G.keyCode],F=true;if(E){F=E.substr(-1)!="!";E=E.replace("!","");D.trigger(E+"Key"+p);if(p=="Up"&&D._lastKeyDown==G.keyCode){D._lastKeyDown=null;D.trigger(E+"KeyPress")}if(p=="Down"){D._lastKeyDown=G.keyCode}}D.trigger("anyKey"+p,G.keyCode);return F}});o=m.prototype;o.on=g;o.formDataObject=z;o.init=function(p){throw new Error("Not implemented")};o.baseInit=function(p,E){var D=this;p._defaults=e.extend(true,p._defaults,E);D._core=p;D._timers={}};o.startTimer=function(E,D,F){var p=this;p.stopTimer(E);p._timers[E]=setTimeout(function(){delete p._timers[E];F.apply(p)},D*1000)};o.stopTimer=function(p){clearTimeout(this._timers[p])};o.core=function(){return this._core};o.opts=function(p){return this.core().opts(p)};o.itemManager=function(){return this.core().itemManager()};o.input=function(){return this.core().input()};o.val=function(D){var p=this.input();if(typeof(D)===C){return p.val()}else{p.val(D)}};o.trigger=function(){var p=this.core();p.trigger.apply(p,arguments)};o.bind=function(D,p){this.core().bind(D,p)};o.initPriority=function(){return 0};var f=false;var k=e.fn.textext=function(D){var p;if(!f&&(p=e.fn.textext.css)!=null){e("head").append("<style>"+p+"</style>");f=true}return this.map(function(){var F=e(this);if(D==null){return F.data("textext")}var E=new j();E.init(F,D);F.data("textext",E);return E.input()[0]})};k.addPlugin=function(p,D){k.plugins[p]=D;D.prototype=new k.TextExtPlugin()};k.addPatch=function(p,D){k.patches[p]=D;D.prototype=new k.TextExtPlugin()};k.TextExt=j;k.TextExtPlugin=m;k.ItemManager=B;k.plugins={};k.patches={}})(jQuery);(function(b){function a(){}b.fn.textext.TextExtIE9Patches=a;b.fn.textext.addPatch("ie9",a);var c=a.prototype;c.init=function(d){if(navigator.userAgent.indexOf("MSIE 9")==-1){return}var e=this;d.on({postInvalidate:e.onPostInvalidate})};c.onPostInvalidate=function(){var e=this,d=e.input(),f=d.val();d.val(Math.random());d.val(f)}})(jQuery);